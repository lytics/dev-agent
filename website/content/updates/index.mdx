# Updates

{/* 
  When adding a new version below, also update ../latest-version.ts
  so the homepage callout stays in sync.
*/}

What's new in dev-agent. We ship improvements regularly to help AI assistants understand your code better.

---

## v0.8.2 â€” Massive Indexing Performance & UX Improvements

*December 13, 2025*

**184% faster indexing with zero silent gaps and context-aware developer insights.**

### What's New

**âš¡ Performance Improvements (184% Faster)**

Eliminated performance bottlenecks throughout the indexing pipeline:

- **63x faster metadata collection** â€” Single batched git command replaces 863 individual calls
- **Removed storage size calculation** â€” Deferred to on-demand in `dev stats` (saves 1-3s)
- **Simplified ownership tracking** â€” Author contributions calculated on-demand (1s vs pre-indexing overhead)
- **Total speedup** â€” Indexing completes in ~33s vs ~95s (61s improvement!)

**ðŸŽ¨ Section-Based Progress Display**

No more silent gaps during indexing. Clean, informative output inspired by Homebrew and Cargo:

```bash
dev index .

âœ“ Scanning Repository (3.2s)
  433 files â†’ 2,525 components

âœ“ Embedding Vectors (20.7s)
  2,525 documents

âœ“ Git History (4.4s)
  252 commits

âœ“ GitHub Issues/PRs (7.8s)
  163 documents

âœ“ Repository indexed successfully!

  Indexed: 433 files â€¢ 2,525 components â€¢ 252 commits â€¢ 163 GitHub docs
  Duration: 33.5s

ðŸ’¡ Next steps:
   dev map       Explore codebase structure
   dev owners    See contributor stats
   dev activity  Find active files
```

**Applied to 4 commands:** `dev index`, `dev update`, `dev git index`, `dev github index`

**ðŸ” Context-Aware `dev owners` Command**

Completely redesigned to provide actionable insights based on your current context:

**Three Intelligent Modes:**

1. **Changed Files Mode** â€” Shows ownership of uncommitted changes (perfect for PR reviews)
2. **Root Directory Mode** â€” High-level overview of top areas (`packages/cli/`, `packages/core/`)
3. **Subdirectory Mode** â€” Detailed expertise for the specific area you're in

**Smart Ownership Display:**

```bash
# Your file (minimal noise)
â””â”€ src/auth.ts
     @you â€¢ 50 commits â€¢ Last: 6 months ago

# Your file + recent activity by others (coordination warning)
â””â”€ src/auth.ts
     @you â€¢ 50 commits â€¢ Last: 6 months ago
     âš ï¸  Recent activity by @alice (yesterday)

ðŸ’¡ Suggested reviewers: @alice

# Someone else's stale file (review required)
â””â”€ âš ï¸  src/legacy.ts
     @alice â€¢ 12 commits â€¢ Last: 2 years ago

# New file (no history)
â””â”€ ðŸ†• src/feature.ts
     New file
```

**Key Features:**

- **Asymmetric icons** â€” Only flags exceptions (âš ï¸ others' files, ðŸ†• new files)
- **Last touched timestamps** â€” Catches stale code and active development
- **Recent activity detection** â€” Warns when others recently modified your files
- **Suggested reviewers** â€” Auto-identifies who to loop in for code reviews
- **Real-time git log analysis** â€” Works for uncommitted changes
- **Git root detection** â€” Works from any subdirectory

### Architecture Simplifications

This release removes unnecessary complexity while improving performance:

- **Removed `file_authors` SQLite table** â€” On-demand calculation is fast enough (1s)
- **Removed `appendFileAuthors()` and `getFileAuthors()` from MetricsStore**
- **Removed `authorContributions` from IndexUpdatedEvent**
- **Cleaner separation** â€” Metrics for analytics, ownership for developer insights

### UX Improvements

**More frequent progress updates:**
- Scanner logs every 2 batches or 10 seconds (was every 50 files)
- Debug logs for slow file processing (>5s)
- Maximum 1-second gaps between progress updates

**Better grouping in `dev owners`:**
- Groups by GitHub handle instead of email (merges multiple emails per developer)
- Monorepo-aware directory grouping (2 levels for `packages/`, `apps/`)

**Graceful degradation:**
- Verbose mode and non-TTY environments show traditional logs
- TTY detection for CI/CD compatibility

### Before & After

**Before:**
```
[14:27:37] typescript 3450/3730 (92%)
           â† 3 MINUTES OF SILENCE
[14:30:09] typescript 3600/3730 (97%)
           â† EMBEDDING COMPLETES
           â† 63 SECONDS OF SILENCE  
[14:31:12] Starting git extraction
```

**After:**
```
âœ“ Scanning Repository (3.2s)
  433 files â†’ 2,525 components

âœ“ Embedding Vectors (20.7s)
  2,525 documents

âœ“ Git History (4.4s)
  252 commits
```

### Migration

No breaking changes for end users. Internal APIs changed:
- `IndexUpdatedEvent` no longer includes `authorContributions`
- `MetricsStore` ownership methods removed (use on-demand calculation)

No re-index required. Changes take effect immediately.

---

## v0.8.0 â€” Developer Insights & Performance

*December 13, 2025*

**New developer activity and ownership commands with 35x faster queries via indexed author contributions.**

### What's New

**ðŸ—ºï¸ New Command: `dev map`**

Visualize your codebase structure with component counts, exports, and hot paths:

```bash
dev map --depth 2 --change-frequency

packages/
â”œâ”€â”€ ðŸ”¥ core/ (45 components, 12 exports) â€” 12 commits in 30d
â”‚   â”œâ”€â”€ scanner/ (18 components, 3 exports)
â”‚   â””â”€â”€ vector/ (12 components, 5 exports)
â”œâ”€â”€ âœï¸ cli/ (28 components, 8 exports) â€” 3 commits in 30d
â””â”€â”€ mcp-server/ (35 components, 9 exports)
```

**224x performance improvement** (103s â†’ 0.46s) through optimized scanning and lazy embedder initialization.

**ðŸ“Š Developer Insight Commands**

Two new top-level commands for understanding codebase activity:

```bash
# See most active files with commit counts and complexity
dev activity

# See developer specializations and file ownership
dev owners
```

**Example Output:**

```bash
$ dev owners

ðŸ‘¥ Developer Contributions

  Developer                Files   Commits   Last Active
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  jane@example.com         147     523       2 hours ago
  john@example.com         89      312       1 day ago
  alice@example.com        64      201       3 days ago

Summary:
â€¢ 305 files analyzed across 3 developers
â€¢ Most active: jane@example.com (147 files)
â€¢ Average 3.5 commits per file
```

**ðŸ’¾ Persistent Metrics with SQLite**

New MetricsStore tracks code analytics over time:
- File-level metrics (lines, complexity, change frequency)
- Author contributions per file
- Historical snapshots for trend analysis
- Foundation for future analytics commands (`dev trends`, `dev health`)

**âš¡ Performance Improvements**

Multiple commands received dramatic speedups:

- **`dev map`:** 224x faster (103s â†’ 0.46s) via optimized scanning
- **`dev owners`:** 35x faster (17.5s â†’ 0.5s) via indexed author data
- **`dev stats`:** 10x faster via direct JSON reads
- **Offline capability:** Indexed data works without git access

**ðŸŽ¨ CLI Enhancements**

- Modernized output with compact, scannable tables
- Factual summaries instead of verbose recommendations
- Visual indicators for activity (ðŸ”¥ hot, âœï¸ active, ðŸ“ recent)
- GitHub handle resolution for developer identification
- Comprehensive help text with examples across all commands

**ðŸ—ï¸ Architecture & Quality**

This release includes significant internal improvements that improve reliability and enable future features:

- **Service layer architecture** â€” 7 services with dependency injection for better testability
- **Complete Zod validation** â€” All 9 MCP adapters validated at runtime
- **SearchService refactor** â€” Shared search logic across tools reduces duplication
- **Enhanced error handling** â€” Clearer messages and proper logging throughout
- **Batched git operations** â€” Reduced overhead from O(N files) to O(1)
- **1,918 tests passing** â€” Comprehensive test coverage for all new features

These improvements make dev-agent more stable, easier to extend, and ready for upcoming analytics features.

### Migration Notes

**Breaking Changes:**

- `dev metrics activity` â†’ `dev activity` (top-level command)
- `dev metrics ownership` â†’ `dev owners` (top-level command)
- `dev metrics size` removed (redundant with `dev stats`)

**What You Get:**

The `dev metrics` namespace is now reserved for future analytical commands like `trends`, `health`, and `complexity`. The simpler top-level commands provide better discoverability and UX.

### Re-index Required

To populate author contribution data, re-index your repository:

```bash
dev index .
```

This is a one-time operation. Future updates via `dev update` will maintain the author data automatically.

---

## v0.7.0 â€” UX & TypeScript Performance Improvements

*December 11, 2025*

**Enhanced user experience and configurable TypeScript performance optimizations.**

### What's New

**ðŸŽ¯ Improved User Experience**

- **Idempotent MCP install** â€” `dev mcp install` now shows positive messaging when server already exists instead of erroring
- **Seamless workflow** â€” `dev index` automatically uses sensible defaults when no config exists (no manual `dev init` required)

**âš¡ TypeScript Performance Optimization**

New default exclusions provide **10-15% indexing performance improvement** for TypeScript projects:

```json
{
  "repository": {
    "excludePatterns": [
      // Standard exclusions
      "**/node_modules/**", "**/dist/**", "**/.git/**", "**/coverage/**",
      // TypeScript performance exclusions (new!)
      "**/*.mock.ts", "**/*.mock.tsx", "**/mocks/**",
      "**/*.d.ts", "**/test-utils/**", "**/testing/**"
    ]
  }
}
```

**ðŸ› ï¸ Full Configurability**

- **Smart defaults** â€” New users get performance benefits automatically
- **Complete control** â€” Fully customizable via `.dev-agent/config.json`
- **Semantic value preserved** â€” Stories files kept (contain valuable component documentation)

### Customization Examples

**Include type definition files:**
```json
{
  "repository": {
    "excludePatterns": [
      "**/node_modules/**", "**/dist/**", "**/.git/**", "**/coverage/**",
      "**/*.mock.ts", "**/*.mock.tsx", "**/mocks/**",
      "**/test-utils/**", "**/testing/**"
      // Removed "**/*.d.ts" to include type definitions in search
    ]
  }
}
```

**Add project-specific patterns:**
```json
{
  "repository": {
    "excludePatterns": [
      // Default patterns...
      "**/vendor/**", "**/*.generated.ts", "**/legacy/**"
    ]
  }
}
```

### Migration

No breaking changes. All improvements are backward compatible.

---

## v0.6.1 â€” Reliability & Performance Improvements

*December 11, 2025*

**Enhanced reliability, performance configuration, and better documentation for the Go support released in v0.6.0.**

### What's New

**âš¡ Performance Configuration**

Fine-tune scanning and indexing performance with environment variables:

```bash
# High-performance systems (8GB+ RAM, 8+ cores)
export DEV_AGENT_TYPESCRIPT_CONCURRENCY=30
export DEV_AGENT_INDEXER_CONCURRENCY=8

# Memory-conservative systems (under 4GB RAM)
export DEV_AGENT_CONCURRENCY=5
export DEV_AGENT_INDEXER_CONCURRENCY=2

dev index .  # Uses your custom settings
```

**Auto-detection:** If no variables are set, dev-agent automatically detects optimal settings based on your CPU and memory.

**ðŸ› ï¸ Enhanced Reliability**

- **Runtime WASM validation** â€” Go scanner now validates tree-sitter WASM availability before parsing
- **Build script improvements** â€” Prevent silent failures that could break Go support
- **Better error handling** â€” Clearer error messages and proper logging levels across all scanners

**ðŸ“š Documentation Improvements**

- Document missing `dev update` command for fast incremental indexing
- Add timing expectations: initial indexing takes 5-10 minutes for large codebases (4k+ files)
- Enhanced troubleshooting guide with performance tuning recommendations
- New performance tuning section in configuration docs

**ðŸ§ª Testing & Architecture**

- 57 new tests covering utility functions and edge cases
- Dependency injection for testable file system operations
- Extracted reusable modules for WASM resolution, concurrency calculation, and file validation

### Migration

No breaking changes. All improvements are backward compatible.

### Environment Variables

| Variable | Description | Auto-Detected Default |
|----------|-------------|----------------------|
| `DEV_AGENT_CONCURRENCY` | Global concurrency setting | Based on CPU/memory |
| `DEV_AGENT_TYPESCRIPT_CONCURRENCY` | TypeScript file processing | Based on system resources |
| `DEV_AGENT_INDEXER_CONCURRENCY` | Vector embedding batches | Based on available memory |
| `DEV_AGENT_GO_CONCURRENCY` | Go file processing | Based on system resources |

---

## v0.6.0 â€” Go Language Support

*December 10, 2025*

**Full Go language support with tree-sitter.** Index Go codebases with the same quality as TypeScript â€” functions, methods, structs, interfaces, and generics.

### What's New

**ðŸ¹ Go Scanner**

dev-agent now fully supports Go codebases:

```go
// All of these are now indexed and searchable:
func NewServer(cfg Config) *Server { ... }
func (s *Server) Start(ctx context.Context) error { ... }
type Config struct { Host string; Port int }
type Handler interface { Handle(ctx context.Context) error }
type Stack[T any] struct { items []T }  // Generics!
```

**Features:**
- Functions and methods with receiver information
- Structs, interfaces, and type aliases
- Go 1.18+ generics support
- Go doc comment extraction
- Exported symbol detection (capital letter convention)

**ðŸ“‹ Progress Logging**

New `--verbose` flag shows detailed progress:

```bash
dev index . --verbose
[scanner] Found 4338 go files {language: "go", files: 4338}
â § Embedding 4480/49151 documents (9%)
[indexer] Embedding complete {documentsIndexed: 49151}
```

**ðŸš« Smart Exclusions**

Generated files are automatically skipped:
- `*.pb.go` â€” Protobuf
- `*.gen.go`, `*_gen.go` â€” Code generators
- `*.pb.gw.go` â€” gRPC gateway
- `mock_*.go`, `mocks/` â€” Mock files
- `testdata/` â€” Test fixtures

### Why This Matters

Go teams can now use dev-agent for semantic code search across their entire codebase. Search for "authentication middleware" and find your Go handlers, not just TypeScript files.

**Tested on:** Large Go codebase (~4k files, 49k documents) âœ…

### Technical Details

Go parsing uses **tree-sitter WASM** â€” the same parser used by GitHub, Neovim, and other tools. This provides:
- Fast, incremental parsing
- No Go installation required
- Portable across platforms
- Foundation for future Python/Rust support

---

## v0.5.2 â€” GitHub Indexing for Large Repositories

*December 6, 2025*

**Fixed `ENOBUFS` errors when indexing repositories with many GitHub issues/PRs.** Large active repositories can now be fully indexed without buffer overflow issues.

### What's Fixed

**ðŸ› Buffer Overflow Resolution**

The GitHub indexing phase would fail with `ENOBUFS` (No buffer space available) on repositories with extensive GitHub activity:

```bash
# This would fail before:
dev index
âœ– Failed to index repository
[03:09:07] ERROR Failed to fetch issues: spawnSync /bin/sh ENOBUFS
```

**Solution:**
- Increased buffer capacity from 1MB to 50MB for GitHub API responses
- Reduced default fetch limit from 1000 to 500 items (per type)
- Added `--gh-limit` flag for custom limits

### What's New

**âš™ï¸ Configurable Limits**

```bash
# Default (works for most repos)
dev index

# Large repos (200+ issues/PRs)
dev index --gh-limit 200

# Very active repos (500+ issues/PRs)  
dev index --gh-limit 100
```

**ðŸ’¬ Better Error Messages**

If buffer issues occur, you now get actionable guidance:
```
Failed to fetch issues: Output too large. 
Try using --gh-limit with a lower value (e.g., --gh-limit 100)
```

### Why This Matters

Many production repositories have hundreds or thousands of GitHub issues/PRs. Without this fix, `dev index` would fail completely on these repos, preventing AI tools from understanding project context.

Now it just works â€” and if you hit limits, the CLI tells you exactly how to fix it.

**Tested on:** 6,989 file repository with 1,000 GitHub issues/PRs âœ…

---

## v0.5.1 â€” Incremental Indexing

*December 3, 2025*

**`dev update` now actually works.** Only re-index files that changed â€” no more waiting for full re-scans.

### What's New

**âš¡ Fast Updates**

```bash
dev index .     # First run: full index
dev update      # Fast! Only processes changes
```

**ðŸ” Smart Change Detection**

- Detects modified files via content hash
- Finds new files added since last index
- Cleans up documents for deleted files
- Removes orphaned symbols when code changes

### Why This Matters

Before: Every `dev index .` re-scanned your entire codebase. On a 10k file repo, that's 5+ minutes.

Now: `dev update` detects what changed and only processes those files. Same result, fraction of the time.

---

## v0.5.0 â€” Modern JavaScript Support

*December 2, 2025*

**Better coverage for how developers actually write code today.**

Modern JavaScript and TypeScript codebases look very different from traditional OOP. React hooks, arrow functions, and configuration objects are the primary APIs â€” and dev-agent now understands them.

### What's New

**ðŸŽ¯ Arrow Functions**

```typescript
// Now indexed! AI can find these via semantic search
export const useAuth = () => { ... }
const validateEmail = (email: string) => email.includes('@')
```

**âš›ï¸ React Hooks Detection**

Hooks are automatically detected by the `use*` naming pattern. When you search for "authentication hook", dev-agent knows `useAuth` is a hook â€” not just a function.

**ðŸ“¦ Exported Constants**

Configuration objects, context providers, and factory-created values are now searchable:

```typescript
export const API_CONFIG = { baseUrl: '/api', timeout: 5000 }
export const ThemeContext = createContext({ dark: false })
export const SUPPORTED_LANGUAGES = ['typescript', 'javascript']
```

### Why This Matters

Before v0.5.0, searching for "API configuration" wouldn't find `export const API_CONFIG = {...}`. Now it does. This means:

- **Better search results** for modern React/TypeScript codebases
- **More context** for AI assistants to understand your code
- **Fewer "I couldn't find..." moments** when asking about hooks or configs

---

## v0.4.4 â€” Test File Discovery

*December 1, 2025*

**Search results now show related test files automatically.**

When `dev_search` returns source files, it checks for matching test files (`*.test.ts`, `*.spec.ts`) and includes them in the response:

```
1. [89%] function: authenticate (src/auth.ts:15)
2. [84%] class: AuthMiddleware (src/middleware.ts:5)

---
Related test files:
  â€¢ src/auth.test.ts
  â€¢ src/middleware.test.ts
```

This helps AI assistants find both implementation *and* tests without extra searches â€” useful when fixing bugs or understanding expected behavior.

---

## v0.4.0 â€” Intelligent Git History

*November 27, 2025*

**Semantic search over your commit history.**

Ever tried to find "when did we add rate limiting?" by scrolling through `git log`? Now you can just ask:

### New Tool: `dev_history`

Search commits by meaning, not just keywords:

```
> "Find commits related to authentication changes"

1. [92%] fix(auth): resolve token refresh race condition
   Author: jane@example.com | 3 days ago
   Files: src/auth/refresh.ts, src/auth/token.ts

2. [87%] feat(auth): add OAuth2 provider support  
   Author: john@example.com | 2 weeks ago
   Files: src/auth/oauth.ts, src/auth/providers/
```

### Change Frequency in `dev_map`

See which parts of your codebase are actively changing:

```
packages/
â”œâ”€â”€ ðŸ”¥ core/ (45 components) â€” 12 commits in 30d
â”œâ”€â”€ âœï¸ mcp-server/ (28 components) â€” 3 commits in 30d
â”œâ”€â”€ ðŸ“ cli/ (15 components) â€” 2 commits in 90d
â””â”€â”€ subagents/ (35 components)
```

- ðŸ”¥ **Hot** â€” 10+ commits in last 30 days
- âœï¸ **Active** â€” 3-9 commits in last 30 days  
- ðŸ“ **Recent** â€” Any commits in last 90 days

### Context Assembly Improvements

`dev_plan` now includes related commits when assembling context for GitHub issues. AI assistants can see both *what* the issue asks for and *how* similar changes were made before.

---

## v0.3.0 â€” Code Relationships

*November 26, 2025*

**Understand how your code connects.**

### New Tool: `dev_refs`

Find what calls what â€” and what's called by what:

```
> "What functions call validateUser?"

Callers of validateUser:
1. AuthMiddleware.authenticate (src/middleware.ts:45)
2. LoginController.handleLogin (src/controllers/login.ts:23)
3. SessionManager.validateSession (src/session.ts:67)
```

Essential for impact analysis before refactoring.

### Hot Paths in `dev_map`

See the most-referenced files in your codebase:

```
Hot Paths (most referenced):
  ðŸ”¥ src/utils/logger.ts (47 references)
  ðŸ”¥ src/types/index.ts (34 references)
  ðŸ”¥ src/config.ts (28 references)
```

### Smarter Context Assembly

`dev_plan` was refactored from generating task breakdowns to assembling rich context. Instead of making assumptions about *how* to implement something, it now gives AI assistants the context they need to figure it out themselves.

---

## v0.1.0 â€” Initial Release

*November 26, 2025*

**The foundation: local-first code understanding for AI tools.**

### Core Features

- **Semantic Search** â€” Find code by meaning, not keywords
- **MCP Integration** â€” Works with Cursor, Claude Code, and any MCP client
- **Multi-language** â€” TypeScript, JavaScript, Go, Python, Rust, Markdown
- **100% Local** â€” No cloud, no telemetry, all processing on your machine

### Five Tools at Launch

| Tool | Purpose |
|------|---------|
| `dev_search` | Semantic code search |
| `dev_plan` | Context assembly for issues |
| `dev_explore` | Pattern discovery |
| `dev_gh` | GitHub issue/PR search |
| `dev_status` | Repository health |

### Installation

One command to index, one command to install:

```bash
npm install -g dev-agent
dev index .
dev mcp install --cursor
```

---

## What's Next?

We're working on:

- **Python support** â€” Using tree-sitter infrastructure from Go scanner
- **Rust support** â€” Structs, traits, impl blocks
- **Parallel search** â€” Query multiple repos simultaneously

Have ideas? [Open an issue](https://github.com/lytics/dev-agent/issues) or join the discussion.

